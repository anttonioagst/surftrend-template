(function($){'use strict';$('.nav-mobile-toggle').on('click',function(){$('.nav-mobile-overlay').addClass('active');$('body').css('overflow','hidden');$(this).attr('aria-expanded','true')});$('.nav-mobile-close, .cart-overlay').on('click',function(){$('.nav-mobile-overlay').removeClass('active');$('body').css('overflow','');$('.nav-mobile-toggle').attr('aria-expanded','false')});$('.nav-mobile-item.has-submenu > .nav-mobile-link').on('click',function(e){e.preventDefault();$(this).parent().toggleClass('active').siblings().removeClass('active')});var searchTimeout;$('.search-input').on('keyup',function(){var query=$(this).val();clearTimeout(searchTimeout);if(query.length>=3){searchTimeout=setTimeout(function(){},300)}});$('.cart-link.cart-suspended').on('click',function(e){e.preventDefault();loadSuspendedCart();$('.suspended-cart').addClass('active');$('body').css('overflow','hidden')});$('.cart-overlay').on('click',function(){$('.suspended-cart').removeClass('active');$('body').css('overflow','')});function loadSuspendedCart(){$.post('load-widget.php',{widget:'widgets/carrinho-suspenso.html'},function(data){$('.suspended-cart .cart-content').html(data)})}
var lastScroll=0;var header=$('.header-main');var headerHeight=header.outerHeight();$(window).on('scroll',function(){var currentScroll=$(this).scrollTop();if(currentScroll>0){header.addClass('scrolled').css('box-shadow','var(--sombra-media)')}else{header.removeClass('scrolled').css('box-shadow','none')}
lastScroll=currentScroll});$('.nav-item.has-submenu').on('mouseenter',function(){var submenu=$(this).find('.nav-submenu');var submenuOffset=submenu.offset();var submenuWidth=submenu.outerWidth();var windowWidth=$(window).width();if(submenuOffset&&(submenuOffset.left+submenuWidth>windowWidth)){submenu.css({'left':'auto','right':0})}});function updateUserInfo(){$.post('action.php',{funcao:'userdata'},function(data){if(data.logged==='1'){var firstName=data.data.nome.split(' ')[0];$('.account-text small').text('Olá, '+firstName)}},'json')}
function updateCartCounter(){$.post('action.php',{funcao:'cart_info'},function(data){if(data.success){var totalItems=data.total_items||0;var $cartCount=$('.cart-count');$cartCount.text(totalItems);if(totalItems>0){$cartCount.addClass('has-items')}else{$cartCount.removeClass('has-items')}}},'json')}
readListener('onAddProductCart',function(){updateCartCounter();if($('.cart-link').hasClass('cart-suspended')){loadSuspendedCart();$('.suspended-cart').addClass('active');$('body').css('overflow','hidden')}});readListener('totalItensCarrinho',function(total){var $cartCount=$('.cart-count');$cartCount.text(total||0);if(total>0){$cartCount.addClass('has-items')}else{$cartCount.removeClass('has-items')}});$(document).ready(function(){updateUserInfo();updateCartCounter();$(document).on('keydown',function(e){if(e.key==='Escape'||e.keyCode===27){$('.nav-mobile-overlay').removeClass('active');$('.suspended-cart').removeClass('active');$('body').css('overflow','')}});if(/iPad|iPhone|iPod/.test(navigator.userAgent)){$('.search-input').attr('autocapitalize','off')}})})(jQuery)